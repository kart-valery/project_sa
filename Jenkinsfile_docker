pipeline {
   agent any
   stages {
    stage('Install docker with parametr') {
      steps {
            sh '''
                sshpass -p "${PASS}" ssh -o StrictHostKeyChecking=no root@${HOST}
                apt install sudo -y
                sudo apt-get update -y
                sudo apt-get -y install apt-transport-https ca-certificates curl gnupg lsb-release mc
                sudo apt-get update
                sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose -y
                git clone https://github.com/kart-valery/project_sa.git
                mkdir -p /home/old/db
                mkdir -p /home/old/html
                sudo chown -R jenkins:jenkins /home/old
                mkdir -p /data/docker/db
                mkdir -p /data/docker/html
                cp ./docker/docker-compose.yml /data/docker/docker-compose.yml
                sudo chown -R jenkins:jenkins /data/docker
                cd /data/docker/ && docker-compose up -d
                ifconfig
                '''
            }
    }

}
    post {
        always {
            deleteDir()
        }
    
  }
}
